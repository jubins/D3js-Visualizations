<div style="margin-top: 1%;">
        <div class="container col-xs-12 col-sm-8 col-md-8 dashboard-chart-block text-center" style="height: 500px; width: 650px; margin-top:0; padding:20px 10px; border-top: #2eaeea 30px solid;">
            <div id="chart-area"></div>
        </div>
</div>

<script src="https://d3js.org/d3.v5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.9.1/d3-tip.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.9.1/d3-tip.min.js"></script>
<link rel="stylesheet" href="https://rawgithub.com/Caged/d3-tip/master/examples/example-styles.css">

<script>
  function create_chart(data) {
    // Setting up the graph margin, scale and labels
    var margin = {left: 60, right: 20, top: 20, bottom: 60};
    var height = 450 - margin.top - margin.bottom,
        width = 600 - margin.left - margin.right;
    var g = d3.select('#chart-area')
            	.append('svg')
            	.attr('width', width + margin.left + margin.right)
            	.attr('height', height + margin.top + margin.bottom)
            	.append('g')
            	.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

    // Define Scales
    var x = d3.scaleLinear()
              .domain([0, d3.max(data, function (d) { return d.fpr; })])
              .range([0, width]);
    var y = d3.scaleLinear()
              .domain([0, d3.max(data, function (d) { return d.tpr; })])
              .range([height, 0]);

    // Define Axis
    var xAxisCall = d3.axisBottom(x)
                      .ticks(8)
                      .tickFormat(d3.format('.2f'));
    var yAxisCall = d3.axisLeft(y)
                      .ticks(8)
                      .tickFormat(d3.format('.2f'));
    g.append('g')
      .attr('class', 'x axis')
      .attr('transform', 'translate(0,' + height + ')')
      .call(xAxisCall);
    g.append('g')
      .attr('class', 'y axis')
      .call(yAxisCall);

    // Define Labels
    var xLabel = g.append('text')
                  .attr('y', height + 40)
                  .attr('x', width / 2)
                  .attr('font-size', '15px')
                  .attr('text-anchor', 'middle')
                  .text('False Positive Rate (FPR)');
      var yLabel = g.append('text')
                    .attr('transform', 'rotate(-90)')
                    .attr('y', 0 - margin.left + 20)
                    .attr('x', 0 - height / 2)
                    .attr('font-size', '15px')
                    .attr('text-anchor', 'middle')
                    .text('True Positive Rate (TPR)');

      // Line path generator
      var line = d3.line()
          .x(function(d) { return x(d.fpr); })
          .y(function(d) { return y(d.tpr); });
      // Add line to chart
      g.append("path")
          .attr("class", "line")
          .attr("fill", "none")
          .attr("stroke", "purple")
          .attr("stroke-width", "4px")
          .attr("d", line(data));

    /******************************** Tooltip Code ********************************/
    // For tooltip
    var bisectData = d3.bisector(function(d) { return d.fpr; }).left;
    var focus = g.append("g")
        .attr("class", "focus")
        .style("display", "none");

    focus.append("line")
        .attr("class", "x-hover-line hover-line")
        .attr('stroke', '#6F257F')
        .attr('stroke-width', '1px')
        .attr('stroke-dasharray', [3,3])
        .attr("y1", 0)
        .attr("y2", height);

    focus.append("line")
        .attr("class", "y-hover-line hover-line")
        .attr('stroke', '#6F257F')
        .attr('stroke-width', '1px')
        .attr('stroke-dasharray', [3,3])
        .attr("x1", 0)
        .attr("x2", width);

    focus.append("circle")
        .attr("r", 5)
        .attr('fill', 'purple')
        .attr('stoke', 'blue')
        .attr('stroke-width', 3)
        ;

    focus.append("text")
        .attr("x", 15)
        .attr("dy", ".31em");

    g.append("rect")
        .attr("class", "overlay")
        .attr("width", width)
        .attr("opacity", 0)
        .attr('pointer-events', 'all')
        .attr("height", height)
        .on("mouseover", function() { focus.style("display", null); })
        .on("mouseout", function() { focus.style("display", "none"); })
        .on("mousemove", mousemove);

    function mousemove() {
        var x0 = x.invert(d3.mouse(this)[0]),
            i = bisectData(data, x0, 1),
            d0 = data[i - 1],
            d1 = data[i],
            d = x0 - d0.fpr > d1.fpr - x0 ? d1 : d0;

        // var tipText = "<strong>Life Expectancy:</strong> <span style='color:red'>" + d3.format(".2f")(d.fpr) + "</span><br>";
        // tipText += "<strong>Life Expectancy:</strong> <span style='color:red'>" + d3.format(".2f")(d.tpr) + "</span><br>";
        // tipText += "<strong>Life Expectancy:</strong> <span style='color:red'>" + d3.format(".2f")(d.threshold) + "</span><br>";
        tipText = "FPR: " + d3.format(".2f")(d.fpr) + "\nTPR: " + d3.format(".2f")(d.tpr) + "\nThreshold: " + d3.format(".2f")(d.threshold)
        focus.attr("transform", "translate(" + x(d.fpr) + "," + y(d.tpr) + ")");
        focus.select("text").text(tipText);
        focus.select(".x-hover-line").attr("y2", height - y(d.tpr));
        focus.select(".y-hover-line").attr("x2", -x(d.fpr));
    }

  }

  var data = [{'fpr': 0.0, 'tpr': 0.0, 'threshold': 0.8},
              {'fpr': 0.2, 'tpr': 0.2, 'threshold': 0.7},
              {'fpr': 0.35, 'tpr': 0.5, 'threshold': 0.6},
              {'fpr': 0.45, 'tpr': 0.7, 'threshold': 0.4},
              {'fpr': 0.55, 'tpr': 0.8, 'threshold': 0.35},
              {'fpr': 0.55, 'tpr': 0.85, 'threshold': 0.31},
              {'fpr': 0.65, 'tpr': 0.9, 'threshold': 0.3},
              {'fpr': 0.65, 'tpr': 0.95, 'threshold': 0.29},
              {'fpr': 0.75, 'tpr': 0.96, 'threshold': 0.28},
              {'fpr': 0.85, 'tpr': 0.97, 'threshold': 0.25},
              {'fpr': 1.0, 'tpr': 1.0, 'threshold': 0.1}
            ];

  create_chart(data);

</script>
